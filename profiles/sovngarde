#!/bin/bash
set -eo pipefail

# https://gist.github.com/maxkagamine/35db9f2611db7b1363b250fde23ab40e
wget http://ftp.gnu.org/gnu/stow/stow-latest.tar.gz -O - | tar -xzC /tmp
( cd /tmp/stow* && ./configure && make install )
rm -rf /tmp/stow*

mkdir -p ~/.local/bin
mkdir -p /usr/share/doc/fzf/examples

wget "https://raw.githubusercontent.com/junegunn/fzf/$(fzf --version)/shell/key-bindings.bash" \
  -O /usr/share/doc/fzf/examples/key-bindings.bash
wget "https://raw.githubusercontent.com/junegunn/fzf/$(fzf --version)/shell/completion.bash" \
  -O /usr/share/doc/fzf/examples/completion.bash

sh -c "$(curl -fsSL https://starship.rs/install.sh)" -- \
  -y -b ~/.local/bin >/dev/null

stow -R \
  bash \
  dircolors \
  empty_string_is_git_status \
  fzf \
  git \
  nano \
  starship \
  unraid
